<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;,&quot;shell&quot;,&quot;r&quot;,&quot;ruby&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="r">r</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://plants.usda.gov/java/'>USDA Plants Database</a></li>
            <li><a href='https://plantsdb.xyz'>plantsdb API</a></li>
            <li><a href='https://github.com/sckott/usdaplantsapidocs'>Contribute to these docs</a></li>
            <li><a href='http://recology.info/usdaplantsapistatus/'>API Status!</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the USDA plants database API!</p>

<p>We have examples for Shell (using <code class="prettyprint">curl</code> and <code class="prettyprint">jq</code>), R, and Ruby! You can view code examples in the dark area to the right (or below if on mobile), and you can switch the programming language of the examples with the tabs in the top right.</p>

<aside class="notice">
We&rsquo;re still in the process of filling out examples &hellip;
</aside>

<aside class="warning">
Check on the status of the API at our <a href="http://recology.info/usdaplantsapistatus">status page</a>
</aside>

<h1 id="base-url">Base URL</h1>

<p><a href="https://plantsdb.xyz">https://plantsdb.xyz</a></p>

<h1 id="http-methods">HTTP methods</h1>

<p>This is a <code class="prettyprint">read only</code> API. That is, we only allow <code class="prettyprint">GET</code> (and <code class="prettyprint">HEAD</code>) requests on this API.</p>

<p>Requests of all other types will be rejected with appropriate <code class="prettyprint">405</code> code, including <code class="prettyprint">POST</code>, <code class="prettyprint">PUT</code>, <code class="prettyprint">COPY</code>, <code class="prettyprint">HEAD</code>, <code class="prettyprint">DELETE</code>, etc.</p>

<h1 id="response-codes">Response Codes</h1>

<ul>
<li>200 (OK) - request good!</li>
<li>302 (Found) - the root <code class="prettyprint">/</code>, redirects to <code class="prettyprint">/heartbeat</code>, and <code class="prettyprint">/docs</code> redirects to these documents</li>
<li>400 (Bad request) - When you have a malformed request, fix it and try again</li>
<li>404 (Not found) - When you request a route that does not exist, fix it and try again</li>
<li>405 (Method not allowed) - When you use a prohibited HTTP method (we only allow <code class="prettyprint">GET</code> and <code class="prettyprint">HEAD</code>)</li>
<li>500 (Internal server error) - Server got itself in trouble; get in touch with us. (in <a href="https://github.com/ropensci/fishbaseapi/issues">Issues</a>)</li>
</ul>

<blockquote>
<p><code class="prettyprint">400</code> responses will look something like</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 400 Bad Request
Access-Control-Allow-Methods: HEAD, GET
Access-Control-Allow-Origin: *
Cache-Control: public, must-revalidate, max-age=60
Content-Length: 85
Content-Type: application/json; charset=utf8
Date: Wed, 13 Jul 2016 22:50:55 GMT
Server: Caddy
Status: 400 Bad Request
X-Content-Type-Options: nosniff

{
  "count": 0,
  "returned": 0,
  "data": null,
  "error": {
    "message": "limit too large (max 5000)"
  }
}
</code></pre>

<blockquote>
<p><code class="prettyprint">404</code> responses will look something like</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 404 Not Found
Access-Control-Allow-Methods: HEAD, GET
Access-Control-Allow-Origin: *
Cache-Control: public, must-revalidate, max-age=60
Content-Length: 27
Content-Type: application/json; charset=utf8
Date: Wed, 13 Jul 2016 22:51:30 GMT
Server: Caddy
Status: 404 Not Found
X-Cascade: pass
X-Content-Type-Options: nosniff

{
    "error": "route not found"
}
</code></pre>

<blockquote>
<p><code class="prettyprint">405</code> responses will look something like (with an empty body)</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 405 Method Not Allowed
Access-Control-Allow-Methods: HEAD, GET
Access-Control-Allow-Origin: *
Cache-Control: public, must-revalidate, max-age=60
Content-Length: 0
Content-Type: application/json; charset=utf8
Date: Wed, 13 Jul 2016 22:52:04 GMT
Server: Caddy
Status: 405 Method Not Allowed
X-Content-Type-Options: nosniff
</code></pre>

<blockquote>
<p><code class="prettyprint">500</code> responses will look something like</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 500 Internal Server Error
Cache-Control: public, must-revalidate, max-age=60
Connection: close
Content-Length: 24
Content-Type: application/json
Date: Wed, 13 Jul 2016 22:52:04 GMT
Server: Caddy
Status: 500 Internal Server Error
X-Content-Type-Options: nosniff

{
    "error": "server error"
}
</code></pre>

<p>Occassionally you may get a MySQL error message in your <code class="prettyprint">error</code> slot. Get in touch
with us if that happens as that shouldn&rsquo;t be happening, and we&rsquo;ll need to fix
something on our end.</p>

<h1 id="response-headers">Response headers</h1>

<p>Response headers give the following noteable things:</p>

<ul>
<li>allowed methods on a route</li>
<li>allowed origins</li>
<li>cache information</li>
<li>body content length</li>
<li>content type (JSON)</li>
<li>date</li>
<li>server info</li>
<li>http status code</li>
</ul>

<blockquote>
<p><code class="prettyprint">200</code> response header will look something like</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 200 OK
Access-Control-Allow-Methods: HEAD, GET
Access-Control-Allow-Origin: *
Cache-Control: public, must-revalidate, max-age=60
Content-Length: 3389
Content-Type: application/json; charset=utf8
Date: Wed, 13 Jul 2016 22:53:10 GMT
Server: Caddy
Status: 200 OK
X-Content-Type-Options: nosniff
</code></pre>

<h1 id="response-bodies">Response bodies</h1>

<blockquote>
<p>Response bodies generally look like:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"returned"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"Symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABAB"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"Accepted_Symbol_x"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABAB"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"Synonym_Symbol_x"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nt">"Scientific_Name_x"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Abutilon abutiloides (Jacq.) Garcke ex Hochr."</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Responses have 4 slots:</p>

<ul>
<li>count: Number records found</li>
<li>returned: Number records returned</li>
<li>error: If an error did not occur this is <code class="prettyprint">null</code>, otherwise, an error message.</li>
<li>data: The hash of data if any data returned. If no data found, this is an empty hash (hash of length zero)</li>
</ul>

<p>Responses with errors also have the same 4 slots, but no data returned, and there should be an
informative error message.</p>

<h1 id="media-types">Media Types</h1>

<p>We serve up only JSON in this API. All responses will have <code class="prettyprint">Content-Type: application/json; charset=utf8</code>.</p>

<h1 id="pagination">Pagination</h1>

<p>The query parameters <code class="prettyprint">limit</code> (default = 10) and <code class="prettyprint">offset</code> (default = 0) can be used
to toggle the number of results you get back and what record you start at. This
doesn&rsquo;t apply to some routes, which don&rsquo;t accept any parameters (e.g., <a href="#docs">docs</a>).</p>

<p>The response body from the server will include data on records found in <code class="prettyprint">count</code> and number returned in <code class="prettyprint">returned</code>:</p>

<ul>
<li><code class="prettyprint">&quot;count&quot;: 1056</code></li>
<li><code class="prettyprint">&quot;returned&quot;: 10</code></li>
</ul>

<h1 id="authentication">Authentication</h1>

<p>We don&rsquo;t require any. Cheers :)</p>

<h1 id="parameters">Parameters</h1>

<h2 id="common-parameters">Common parameters</h2>

<ul>
<li>limit (integer, optional) <code class="prettyprint">number</code> of records to return.

<ul>
<li>Default: <code class="prettyprint">10</code></li>
</ul></li>
<li>offset (integer, optional) Record <code class="prettyprint">number</code> to start at.

<ul>
<li>Default: <code class="prettyprint">0</code></li>
</ul></li>
<li>fields (string, optional) Comma-separated <code class="prettyprint">string</code> of fieds to return.

<ul>
<li>Example: <code class="prettyprint">Genus,Species</code></li>
</ul></li>
</ul>

<p>Above parameters common to all routes except:</p>

<ul>
<li><a href="#root">root</a></li>
<li><a href="#heartbeat">heartbeat</a></li>
<li><a href="#docs">docs</a></li>
</ul>

<h2 id="additional-parameters">Additional parameters</h2>

<p>Right now, any field that is returned from a route can also be queried on. All of the fields from each route are too long to list here - inspect data returned from a small data request, then change your query as desired.</p>

<p>Right now, parameters that are not found are silently dropped. For example, if you query with <code class="prettyprint">/species?foo=bar</code> in a query, and <code class="prettyprint">foo</code> is not a field in <code class="prettyprint">species</code> route, then the <code class="prettyprint">foo=bar</code> part is ignored. We may in the future error when parameters are not found.</p>

<h1 id="routes">Routes</h1>

<aside class="notice">
Shell examples below using <code>curl</code> sometimes use the command line tool <code>jq</code>,
a tool to parse JSON. If you don&rsquo;t want to use <code>jq</code> - just remove the pipe and
everything after it. If you do, see <a href="https://stedolan.github.io/jq/">stedolan.github.io/jq</a>
for installation and usage.
<br><br>
R examples below use the package <code>request</code>. Install it by doing <code>install.packages("request")</code> in an R session
<br><br>
Ruby examples below use the gems <code>faraday</code> and <code>multi_json</code>. Install them by doing <code>gem install faraday multi_json</code> on the command line
</aside>

<h2 id="root">Root</h2>

<p><code class="prettyprint">GET https://plantsdb.xyz</code></p>
<pre class="highlight shell"><code>curl -L <span class="s2">"https://plantsdb.xyz"</span>
</code></pre>

<p>Redirects to <code class="prettyprint">https://plantsdb.xyz/heartbeat</code></p>

<aside class="notice">
Note that when using <code>curl</code> you need to use the <code>-L</code> flag
to follow redirects.
</aside>

<h2 id="heartbeat">Heartbeat</h2>

<p>Lists all the routes, and gives some indicaion of what can be passed to them.</p>
<pre class="highlight shell"><code>curl <span class="s2">"https://plantsdb.xyz/heartbeat"</span> |  jq .
</code></pre>

<p>The above command returns JSON structured like this:</p>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"routes"</span>: <span class="o">[</span>
    <span class="s2">"/search (HEAD, GET)"</span>,
    <span class="s2">"/heartbeat"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight r"><code><span class="n">library</span><span class="p">(</span><span class="s2">"request"</span><span class="p">)</span>

<span class="s1">'https://plantsdb.xyz/heartbeat'</span> <span class="o">%&gt;%</span> <span class="n">api</span><span class="p">()</span>
</code></pre>
<pre class="highlight r"><code><span class="o">$</span><span class="n">routes</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s2">"/search (HEAD, GET)"</span> <span class="s2">"/heartbeat"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>
<span class="nb">require</span> <span class="s1">'multi_json'</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">url: </span><span class="s1">'https://plantsdb.xyz'</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">get</span> <span class="s1">'heartbeat'</span>
<span class="no">MultiJson</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
</code></pre>

<p>The above command returns a Hash like:</p>
<pre class="highlight ruby"><code><span class="o">=&gt;</span> <span class="p">{</span><span class="s2">"routes"</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"/search (HEAD, GET)"</span><span class="p">,</span> <span class="s2">"/heartbeat"</span><span class="p">]}</span>
</code></pre>

<h2 id="docs">docs</h2>

<blockquote>
<p>GET [/docs]</p>
</blockquote>

<p>Get brief description of each table in the Fishbase database.</p>

<ul>
<li>Response 200 (application/json)

<ul>
<li><a href="#response-headers">Headers</a></li>
<li><a href="#response-bodies">Body</a></li>
</ul></li>
</ul>

<h2 id="search">search</h2>

<blockquote>
<p>GET [/search{?limit}{?offset}{?fields}]</p>
</blockquote>

<p>Search for plants species</p>

<ul>
<li>Response 200

<ul>
<li><a href="#response-headers">Headers</a></li>
<li><a href="#response-bodies">Body</a></li>
</ul></li>
</ul>
<pre class="highlight shell"><code>curl <span class="s2">"https://plantsdb.xyz/search?limit=5"</span> |  jq .
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"/docs/:table?"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"/heartbeat"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"/mysqlping"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"/listfields"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"/comnames?&lt;params&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"/country?&lt;params&gt;"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight r"><code><span class="n">library</span><span class="p">(</span><span class="s2">"request"</span><span class="p">)</span>

<span class="n">res</span> <span class="o">&lt;-</span> <span class="n">api</span><span class="p">(</span><span class="s2">"https://plantsdb.xyz"</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">api_path</span><span class="p">(</span><span class="n">search</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">api_query</span><span class="p">(</span><span class="n">limit</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="n">tibble</span><span class="o">::</span><span class="n">as_data_frame</span><span class="p">(</span><span class="n">res</span><span class="o">$</span><span class="n">data</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>returns</p>
</blockquote>
<pre class="highlight r"><code><span class="c1"># A tibble: 5 x 134
</span>     <span class="n">id</span> <span class="n">Symbol</span> <span class="n">Accepted_Symbol_x</span> <span class="n">Synonym_Symbol_x</span>
<span class="o">*</span> <span class="o">&lt;</span><span class="n">int</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>             <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>            <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="m">1</span>     <span class="m">1</span>   <span class="n">ABAB</span>              <span class="n">ABAB</span>
<span class="m">2</span>     <span class="m">2</span>  <span class="n">ABAB2</span>             <span class="n">ABPR3</span>            <span class="n">ABAB2</span>
<span class="m">3</span>     <span class="m">3</span>  <span class="n">ABAB3</span>              <span class="n">ABTH</span>            <span class="n">ABAB3</span>
<span class="m">4</span>     <span class="m">4</span> <span class="n">ABAB70</span>            <span class="n">ABAB70</span>
<span class="m">5</span>     <span class="m">5</span>   <span class="n">ABAC</span>             <span class="n">ABUMB</span>             <span class="n">ABAC</span>
<span class="c1"># ... with 130 more variables: Scientific_Name_x &lt;chr&gt;,
#   Hybrid_Genus_Indicator &lt;chr&gt;, Hybrid_Species_Indicator &lt;chr&gt;,
#   Species &lt;chr&gt;, Subspecies_Prefix &lt;chr&gt;, Hybrid_Subspecies_Indicator &lt;chr&gt;,
#   Subspecies &lt;chr&gt;, Variety_Prefix &lt;chr&gt;, Hybrid_Variety_Indicator &lt;chr&gt;,
#   Variety &lt;chr&gt;, Subvariety_Prefix &lt;chr&gt;, Subvariety &lt;chr&gt;,
#   Forma_Prefix &lt;chr&gt;, Forma &lt;chr&gt;, Genera_Binomial_Author &lt;chr&gt; ...
</span></code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>
<span class="nb">require</span> <span class="s1">'multi_json'</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">url: </span><span class="s1">'https://plantsdb.xyz'</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">get</span> <span class="s1">'search'</span><span class="p">,</span> <span class="p">{</span><span class="s2">"limit"</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">dat</span> <span class="o">=</span> <span class="no">MultiJson</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
<span class="n">dat</span><span class="p">[</span><span class="s1">'data'</span><span class="p">].</span><span class="nf">collect</span><span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span><span class="p">[</span><span class="s1">'Genus'</span><span class="p">]}</span>
</code></pre>

<blockquote>
<p>The above command returns a Hash like:</p>
</blockquote>
<pre class="highlight ruby"><code><span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"Abutilon"</span><span class="p">,</span> <span class="s2">"Abrus"</span><span class="p">,</span> <span class="s2">"Abutilon"</span><span class="p">,</span> <span class="s2">"Abietinella"</span><span class="p">,</span> <span class="s2">"Abronia"</span><span class="p">]</span>
</code></pre>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="r">r</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
